/* His name was Bruce McNair. Copyright 2025 City of Vernonia, Oregon. */
import{__awaiter as t,__decorate as o}from"tslib";import{subclass as e,property as i}from"@arcgis/core/core/accessorSupport/decorators";import n from"@arcgis/core/widgets/Widget";import{tsx as r}from"@arcgis/core/widgets/support/widget";let a=class extends n{get container(){return this._container}set container(t){this._container=t}constructor(t){super(t),this._container=document.createElement("calcite-dialog"),this.showDownload=!0,this._fileName="",this._url="",this._loading=!1,this.container=this._container,document.body.appendChild(this.container),this.container.addEventListener("calciteDialogClose",(()=>{this._url=""}))}download(o,e){return t(this,void 0,void 0,(function*(){Object.assign(document.createElement("a"),{href:e,download:o,style:"display: none;"}).click()}))}show(t,o){this._fileName=t,this._url!==o&&(this._loading=!0),this._url=o,this.container.open=!0}_close(){this.container.open=!1}render(){const{showDownload:t,_fileName:o,_url:e,_loading:i}=this;return r("calcite-dialog",{heading:o,loading:i,modal:!0,style:"--calcite-dialog-content-space:0;"},r("img",{style:"width:100%; min-height:300px;",src:e,afterCreate:t=>{t.addEventListener("load",(()=>{this._loading=!1}))}}),t?r("calcite-button",{appearance:"outline",slot:"footer-end",onclick:this.download.bind(this,o,e)},"Download"):null,r("calcite-button",{slot:"footer-end",onclick:this._close.bind(this)},"Close"))}};o([i()],a.prototype,"_fileName",void 0),o([i()],a.prototype,"_url",void 0),o([i()],a.prototype,"_loading",void 0),a=o([e("cov.components.PhotoDialog")],a);export default a;