/* His name was Bruce McNair. Copyright 2025 City of Vernonia, Oregon. */
import{__awaiter as e,__decorate as r}from"tslib";import{property as t,subclass as a}from"@arcgis/core/core/accessorSupport/decorators";import o from"@arcgis/core/widgets/Widget";import{tsx as i}from"@arcgis/core/widgets/support/widget";import s from"@arcgis/core/core/Collection";import c from"@arcgis/core/layers/Layer";import{publish as l}from"pubsub-js";import{IMAGERY_LAYER_TOPIC as n,IMAGERY_REFERENCE_LAYER_TOPIC as g}from"./Basemap";export const DEFAULT_LAYER_INFOS=[{value:"2022",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/OSIP_2022/OSIP_2022_WM/ImageServer"},{value:"2020",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2020/NAIP_2020_SL/ImageServer"},{value:"2018",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/OSIP_2018/OSIP_2018_WM/ImageServer"},{value:"2016",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2016/NAIP_2016_SL/ImageServer"},{value:"2014",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2014/NAIP_2014_WM/ImageServer"},{value:"2012",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2012/NAIP_2012_WM/ImageServer"},{value:"2011",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2011/NAIP_2011_WM/ImageServer"},{value:"2009",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2009/NAIP_2009_WM/ImageServer"},{value:"2005",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2005/NAIP_2005_WM/ImageServer"},{value:"1995",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_1995/NAIP_1995_WM/ImageServer"}];let m=class extends o{constructor(e){super(e),this.layerInfos=new s(DEFAULT_LAYER_INFOS),this._options=new s([i("calcite-option",{selected:!0,value:"default"},"2024 (default)")])}postInitialize(){const{layerInfos:e,_options:r}=this;e.forEach(e=>{const{value:t}=e;r.add(i("calcite-option",{value:t},t))})}render(){const{_options:e}=this;return i("calcite-panel",{heading:"Basemap Imagery",style:"--calcite-panel-background-color: var(--calcite-color-foreground-1); --calcite-panel-space: 0.75rem;"},i("calcite-notice",{icon:"image-layer",scale:"s",style:"margin-bottom: 0.75rem;",open:!0},i("div",{slot:"message"},"Some imagery may have georeferencing or orthocorrection issues, and may not be available at all scales.")),i("calcite-label",{layout:"inline",name:""},i("calcite-switch",{checked:!0,afterCreate:this._switchAfterCreate.bind(this)}),"Reference layer"),i("calcite-label",{style:"--calcite-label-margin-bottom: 0;"},"Imagery year",i("calcite-select",{afterCreate:this._selectAfterCreate.bind(this)},e.toArray())))}_selectAfterCreate(r){const{layerInfos:t}=this;r.addEventListener("calciteSelectChange",()=>e(this,void 0,void 0,function*(){const e=r.selectedOption.value;if("default"===e)return void l(n,"default");const a=t.find(r=>r.value===e);if(!a)return;const{layer:o,url:i}=a;o||(a.layer=yield c.fromArcGISServerUrl({url:i}),yield a.layer.load()),l(n,a.layer)}))}_switchAfterCreate(e){e.addEventListener("calciteSwitchChange",()=>{l(g,e.checked)})}};r([t({type:s})],m.prototype,"layerInfos",void 0),m=r([a("cov.components.BasemapImagery")],m);export default m;