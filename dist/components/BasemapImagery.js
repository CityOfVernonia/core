/* His name was Bruce McNair. Copyright 2025 City of Vernonia, Oregon. */
import{__awaiter as e,__decorate as r}from"tslib";import{property as o,subclass as t}from"@arcgis/core/core/accessorSupport/decorators";import a from"@arcgis/core/widgets/Widget";import{tsx as s}from"@arcgis/core/widgets/support/widget";import i from"@arcgis/core/core/Collection";import l from"@arcgis/core/layers/Layer";import{publish as c}from"pubsub-js";import{IMAGERY_LAYER_TOPIC as n}from"./Basemap";export const DEFAULT_LAYER_INFOS=[{value:"2022",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/OSIP_2022/OSIP_2022_WM/ImageServer"},{value:"2020",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2020/NAIP_2020_SL/ImageServer"},{value:"2018",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/OSIP_2018/OSIP_2018_WM/ImageServer"},{value:"2016",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2016/NAIP_2016_SL/ImageServer"},{value:"2014",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2014/NAIP_2014_WM/ImageServer"},{value:"2012",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2012/NAIP_2012_WM/ImageServer"},{value:"2011",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2011/NAIP_2011_WM/ImageServer"},{value:"2009",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2009/NAIP_2009_WM/ImageServer"},{value:"2005",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_2005/NAIP_2005_WM/ImageServer"},{value:"1995",url:"https://imagery.oregonexplorer.info/arcgis/rest/services/NAIP_1995/NAIP_1995_WM/ImageServer"}];let g=class extends a{constructor(e){super(e),this.layerInfos=new i(DEFAULT_LAYER_INFOS),this._options=new i([s("calcite-option",{selected:!0,value:"default"},"2024 (default)")])}postInitialize(){const{layerInfos:e,_options:r}=this;e.forEach(e=>{const{value:o}=e;r.add(s("calcite-option",{value:o},o))})}render(){const{_options:e}=this;return s("calcite-panel",{heading:"Basemap Imagery",style:"--calcite-panel-background-color: var(--calcite-color-foreground-1); --calcite-panel-space: 0.75rem;"},s("calcite-notice",{icon:"image-layer",scale:"s",style:"margin-bottom: 0.75rem;",open:!0},s("div",{slot:"title"},"Select imagery by year"),s("div",{slot:"message"},"Some imagery may have georeferencing or orthocorrection issues, and may not be available at all scales.")),s("calcite-select",{afterCreate:this._selectAfterCreate.bind(this)},e.toArray()))}_selectAfterCreate(r){const{layerInfos:o}=this;r.addEventListener("calciteSelectChange",()=>e(this,void 0,void 0,function*(){const e=r.selectedOption.value;if("default"===e)return void c(n,"default");const t=o.find(r=>r.value===e);if(!t)return;const{layer:a,url:s}=t;a||(t.layer=yield l.fromArcGISServerUrl({url:s}),yield t.layer.load()),c(n,t.layer)}))}};r([o({type:i})],g.prototype,"layerInfos",void 0),g=r([t("cov.components.BasemapImagery")],g);export default g;