/* His name was Bruce McNair. Copyright 2025 City of Vernonia, Oregon. */
import{__awaiter as e,__decorate as t}from"tslib";import{watch as i}from"@arcgis/core/core/reactiveUtils";import{property as a,subclass as s}from"@arcgis/core/core/accessorSupport/decorators";import o from"@arcgis/core/widgets/Widget";import{tsx as l}from"@arcgis/core/widgets/support/widget";const r={1941:0,1943:1,1955:2,1979:3};let c=class extends o{constructor(e){super(e),this._layer="usgs",this._visible=!1}postInitialize(){this.addHandles([i(()=>this._visible,this._setLayer.bind(this)),i(()=>this._layer,()=>{this._setLayer(this._visible)})])}_setLayer(t){return e(this,void 0,void 0,function*(){var e;const{historicalTopo:i,usgsTopo:a,_layer:s}=this;t?"usgs"===s?(i.visible=!1,a.visible=!0):(a.visible=!1,i.loaded||(yield i.load()),null===(e=i.sublayers)||void 0===e||e.forEach(e=>{e.visible=e.id===r[s],i.visible=!0})):(i.visible=!1,a.visible=!1)})}render(){const{_visible:e}=this;return l("calcite-panel",{heading:"Topo Maps",style:"--calcite-panel-space: 0.75rem; --calcite-panel-background-color: var(--calcite-color-foreground-1);"},l("calcite-label",null,"Topo map layer",l("calcite-switch",{afterCreate:this._switchAfterCreate.bind(this)})),l("calcite-label",null,"Select topo map",l("calcite-select",{disabled:!e,afterCreate:this._selectAfterCreate.bind(this)},l("calcite-option",{value:"usgs"},"USGS topo map service"),l("calcite-option",{value:"1979"},"1979 USGS topo quad"),l("calcite-option",{value:"1955"},"1955 USGS topo quad"),l("calcite-option",{value:"1943"},"1943 USGS topo quad"),l("calcite-option",{value:"1941"},"1941 USGS topo quad"))),l("calcite-label",{style:"--calcite-label-margin-bottom: 0;"},"Layer opacity",l("calcite-slider",{disabled:!e,afterCreate:this._sliderAfterCreate.bind(this)})))}_selectAfterCreate(e){e.addEventListener("calciteSelectChange",()=>{this._layer=e.selectedOption.value})}_sliderAfterCreate(e){Object.assign(e,{max:100,min:25,value:100,step:5,snap:!0,ticks:25,labelTicks:!0,labelFormatter:e=>`${e}%`}),e.addEventListener("calciteSliderInput",()=>{const{historicalTopo:t,usgsTopo:i}=this,a=e.value/100;t.opacity=a,i.opacity=a})}_switchAfterCreate(e){e.addEventListener("calciteSwitchChange",()=>{this._visible=e.checked})}};t([a()],c.prototype,"_layer",void 0),t([a()],c.prototype,"_visible",void 0),c=t([s("cov.components.TopoMaps")],c);export default c;