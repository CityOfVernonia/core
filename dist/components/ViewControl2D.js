/* His name was Bruce McNair. Copyright 2025 City of Vernonia, Oregon. */
import{__decorate as e}from"tslib";import{watch as i}from"@arcgis/core/core/reactiveUtils";import{subclass as t}from"@arcgis/core/core/accessorSupport/decorators";import o from"@arcgis/core/widgets/Widget";import{tsx as c}from"@arcgis/core/widgets/support/widget";import n from"@arcgis/core/widgets/Home/HomeViewModel";import s from"@arcgis/core/widgets/Zoom/ZoomViewModel";const l="cov--view-control-2d",a={base:l,actions:`${l}_actions`};let r=class extends o{constructor(e){super(e),this.includeFullscreen=!1,this.includeLocate=!1,this.includeMagnifier=!1}postInitialize(){const{magnifierProperties:e,view:i,view:{magnifier:t}}=this;this._home=new n({view:i}),this._zoom=new s({view:i}),t.visible=!1,e&&Object.assign(t,e)}_compassRotation(e){const{view:i}=this;let t;e.shadowRoot?(t=e.shadowRoot.querySelector(".icon-container"),t?(t.style.transform=`rotate(${i.rotation}deg)`,this.watch("view.rotation",()=>{t.style.transform=`rotate(${i.rotation}deg)`})):setTimeout(()=>{this._compassRotation(e)},100)):setTimeout(()=>{this._compassRotation(e)},100)}_initializeFullscreen(e){const{view:t}=this;import("@arcgis/core/widgets/Fullscreen/FullscreenViewModel").then(o=>{const c=new o.default({view:t,element:document.body});e.addEventListener("click",c.toggle.bind(c)),e.disabled="disabled"===c.state||"feature-unsupported"===c.state,this.addHandles(i(()=>c.state,i=>{e.disabled="disabled"===i||"feature-unsupported"===i;const t=e.querySelector("calcite-tooltip");"ready"===i&&(e.icon="extent",e.text="Enter fullscreen",t.innerText="Enter fullscreen"),"active"===i&&(e.icon="full-screen-exit",e.text="Exit fullscreen",t.innerText="Exit fullscreen")}))})}_initializeLocate(e){const{view:t,locateProperties:o}=this;import("@arcgis/core/widgets/Locate/LocateViewModel").then(c=>{const n=new c.default(Object.assign({view:t},o));e.addEventListener("click",n.locate.bind(n)),e.disabled="disabled"===n.state,this.addHandles(i(()=>n.state,i=>{e.disabled="disabled"===i,e.icon="ready"===n.state?"gps-on":"locating"===n.state?"gps-on-f":"disabled"===n.state?"gps-off":""}))})}_toggleMagnifier(){const{view:e,view:{magnifier:i},_magnifierHandle:t}=this;i.visible?(i.visible=!1,t&&t.remove()):(i.visible=!0,this._magnifierHandle=e.on("pointer-move",e=>{i.position={x:e.x,y:e.y}}))}render(){const{view:e,_zoom:i,_home:t,includeLocate:o,includeFullscreen:n,includeMagnifier:s}=this,l=e.magnifier.visible;return c("div",{class:a.base},c("div",{class:a.actions},c("calcite-action-bar",{"expand-disabled":"",floating:!0},c("calcite-action-group",null,c("calcite-action",{text:"Zoom in",icon:"plus",scale:"s",disabled:!i.canZoomIn,onclick:i.zoomIn.bind(i)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Zoom in")),c("calcite-action",{text:"Zoom out",icon:"minus",scale:"s",disabled:!i.canZoomOut,onclick:i.zoomOut.bind(i)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Zoom out")))),c("calcite-action-bar",{"expand-disabled":"",floating:!0},c("calcite-action-group",null,c("calcite-action",{text:"Default extent",icon:"home",scale:"s",onclick:t.go.bind(t)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Default extent")),o?c("calcite-action",{text:"Zoom to location",icon:"gps-on",scale:"s",disabled:"",afterCreate:this._initializeLocate.bind(this)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Zoom to location")):null,e.constraints.rotationEnabled?c("calcite-action",{text:"Reset orientation",icon:"compass-needle",scale:"s",afterCreate:this._compassRotation.bind(this),onclick:()=>e.rotation=0},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Reset orientation")):null)),n?c("calcite-action-bar",{"expand-disabled":"",floating:!0},c("calcite-action-group",null,c("calcite-action",{text:"Enter fullscreen",disabled:"",scale:"s",icon:"extent",afterCreate:this._initializeFullscreen.bind(this)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},"Enter fullscreen")))):null,s?c("calcite-action-bar",{"expand-disabled":"",floating:!0},c("calcite-action-group",null,c("calcite-action",{text:l?"Hide magnifier":"Show magnifier",scale:"s",icon:"magnifying-glass",indicator:!!l,onclick:this._toggleMagnifier.bind(this)},c("calcite-tooltip",{"close-on-click":"","overlay-positioning":"fixed",scale:"s",slot:"tooltip"},l?"Hide magnifier":"Show magnifier")))):null))}};r=e([t("cov.components.ViewControl2D")],r);export default r;