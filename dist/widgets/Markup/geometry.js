/* His name was Bruce McNair. Copyright 2023 City of Vernonia, Oregon. */
import{__awaiter as e}from"tslib";import r from"@arcgis/core/geometry/Point";import{geodesicBuffer as o,offset as t}from"@arcgis/core/geometry/geometryEngine";import*as c from"@arcgis/core/geometry/projection";export const queryFeatureGeometry=r=>e(void 0,void 0,void 0,(function*(){const{layer:e,layer:{objectIdField:o},graphic:t,outSpatialReference:c}=r;return(yield e.queryFeatures({where:`${o} = ${t.attributes[o]}`,returnGeometry:!0,outSpatialReference:c||e.spatialReference})).features[0].geometry}));export const numberOfVertices=e=>{const{type:r}=e;let o=0;return"polyline"===r&&e.paths.forEach((e=>{e.forEach((()=>{++o}))})),"polygon"===r&&e.rings.forEach((e=>{e.forEach(((r,t)=>{t+1<e.length&&++o}))})),o};export const polylineVertices=(e,o)=>{const t=[];return e.paths.forEach((e=>{e.forEach((e=>{t.push(new r({x:e[0],y:e[1],spatialReference:o}))}))})),t};export const polygonVertices=(e,o)=>{const t=[];return e.rings.forEach((e=>{e.forEach(((c,n)=>{n+1<e.length&&t.push(new r({x:c[0],y:c[1],spatialReference:o}))}))})),t};export const buffer=(e,r,t)=>o(e,r,t);export const offset=(r,o,n,i,s,a)=>e(void 0,void 0,void 0,(function*(){c.isLoaded()||(yield c.load());const e=c.project(r,{wkid:s}),p=[];return"both"!==i&&"left"!==i||p.push(c.project(t(e,o,n),a)),"both"!==i&&"right"!==i||p.push(c.project(t(e,-1*o,n),a)),p}));