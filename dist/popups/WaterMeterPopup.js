/* His name was Bruce McNair. Copyright 2023 City of Vernonia, Oregon. */
import{__awaiter as t,__decorate as l}from"tslib";import{subclass as e,property as r}from"@arcgis/core/core/accessorSupport/decorators";import o from"@arcgis/core/PopupTemplate";import i from"@arcgis/core/widgets/Widget";import{tsx as n}from"@arcgis/core/widgets/support/widget";import u from"@arcgis/core/core/Collection";const s="esri-widget__table";export default new o({outFields:["*"],title:"{wsc_id} - {address}",content:t=>new a({graphic:t.graphic}).container});let a=class extends i{constructor(t){super(t),this.container=document.createElement("table"),this._rows=new u}postInitialize(){return t(this,void 0,void 0,(function*(){const{graphic:t,layer:l,objectIdField:e,_rows:r}=this,o=t.attributes[e],i=t.attributes.Notes,u=yield l.queryRelatedFeatures({relationshipId:0,outFields:["*"],objectIds:[o]}),{WSC_TYPE:s,ACCT_TYPE:a,METER_SIZE_T:d,METER_SN:c,METER_REG_SN:p,METER_AGE:h,LINE_IN_MATERIAL:E,LINE_IN_SIZE:_,LINE_OUT_MATERIAL:g,LINE_OUT_SIZE:I}=u[o].features[0].attributes;r.addMany([n("tr",null,n("th",null,"Service type"),n("td",null,s)),n("tr",null,n("th",null,"Account type"),n("td",null,a)),n("tr",null,n("th",null,"Meter size"),n("td",null,d,'"')),n("tr",null,n("th",null,"Serial no."),n("td",null,c)),n("tr",null,n("th",null,"Register no."),n("td",null,p)),n("tr",null,n("th",null,"Meter age"),n("td",null,h," years")),n("tr",null,n("th",null,"Size in"),n("td",null,_,'"')),n("tr",null,n("th",null,"Material in"),n("td",null,E)),n("tr",null,n("th",null,"Size out"),n("td",null,I,'"')),n("tr",null,n("th",null,"Material out"),n("td",null,g))]),i&&r.add(n("tr",null,n("th",null,"Notes"),n("td",null,i)))}))}render(){const{_rows:t}=this;return n("table",{class:s},t.toArray())}};l([r({aliasOf:"graphic.layer"})],a.prototype,"layer",void 0),l([r({aliasOf:"graphic.layer.objectIdField"})],a.prototype,"objectIdField",void 0),a=l([e("ContentWidget")],a);